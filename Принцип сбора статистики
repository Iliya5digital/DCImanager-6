Для сбора, обработки и визуализации статистики в платформе используется сервис работы с оборудованием DCImanager 6 и стороннее программное обеспечение (ПО):

Clickhouse — для сбора и хранения данных статистики;
Grafana — для визуализации, мониторинга и анализа данных.
Сервисы работы со статистикой запускаются в докер-контейнерах:

dci_eservice_1 — сервис работы с оборудованием DCImanager 6;
carbon_clickhouse — агрегатор данных статистики;
clickhouse_server — сервис хранения статистики — база данных Clickhouse;
graphite_clickhouse — сервис преобразования данных статистики в формат graphite;
graphite_carbonapi — API-сервис для передачи метрик в Grafana и интерфейс платформы;
dci_grafana_1 — Grafana.
Сбор и хранение данныхLink to Сбор и хранение данных
Схема сбора статистики:

Сервис работы с оборудованием DCImanager 6 каждые пять минут получает данные с портов устройства.
Сервис Сarbon clickhouse принимает собранные данные в формате graphite, конвертирует их в формат clickhouse и передаёт в сервис Clickhouse server.
Сервис Graphite clickhouse запрашивает данные из Clickhouse server, конвертирует их в формат graphite и передаёт в сервис Graphite carbonapi.
Сервис Graphite carbonapi передаёт данные в Grafana и интерфейс платформы.
Данные статистики доступны по уникальному индексу метрики. Например, индекс метрики для трафика — instance.1.server.{server_id}.port.{port_id}.{type}, где: 

server_id — идентификатор сервера;
port_id — идентификатор порта, к которому подключён сервер;
type — вид трафика. Может принимать значения: rx — входящий, tx — исходящий.
Срок хранения данных статистики — три года.

Визуализация данныхLink to Визуализация данных
Построение графиков в интерфейсе DCImanager 6 выполняет ПО Grafana. Данные статистики вы можете посмотреть в карточке устройства. Например, чтобы просмотреть статистику по трафику для сервера, перейдите в Серверы → выберите сервер → Параметры сервера → Статистика. Подробнее см. в статье Статистика сервера.

Веб-интерфейс Grafana доступен по URL https://domain.com/dci/grafana/.

 Пояснения к URL
domain.com — IP-адрес или доменное имя сервера с платформой

Чтобы перейти в интерфейс Grafana, в правом меню нажмите значок  → Grafana.
