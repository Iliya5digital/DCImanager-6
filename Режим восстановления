Данный режим позволяет восстановить работу сервера, если сервер не запускается после перезагрузки или к нему отсутствует возможность удалённого подключения. При запуске операции восстановления на сервер с локации загружается один из шаблонов. Шаблон — это LiveCD-образ операционной системы (ОС) SystemRescueCD. Эта ОС предназначена для обслуживания, диагностики и устранения неполадок на сервере. Подробнее о работе в SystemRescueCD см. в официальной документации.

Подготовка сервера к восстановлениюLink to Подготовка сервера к восстановлению
Восстановление сервера возможно, если на нём:

установлена ОС семейства Linux;
настроена функция загрузки по сети с помощью iPXE или PXE. Подробнее см. Как изменить способ загрузки сервера?
Рекомендуем настроить подключение сервера к BMC (Intel AMT) или распределителю питания. Если подключение не будет настроено, то для запуска операции сервер потребуется перезагрузить вручную.

Убедитесь, что восстанавливаемый сервер находится в одном L2-сегменте сети с сервером-локацией, и в этом сегменте разрешена передача DHCP, TFTP и HTTP-трафика.

Перед запуском операции установите на локацию, в которой находится сервер, шаблоны восстановления. Подробнее см. в статье Управление локациями.

Запуск режима восстановленияLink to Запуск режима восстановления
Чтобы запустить режим восстановления сервера:

Перейдите в Серверы → выберите сервер →   → Запустить восстановление.
Выберите Шаблон восстановления:
Sysrescd6-x86_64 — рекомендуемый шаблон на основе SystemRescueCD 6;

FreeBSD-rescue-amd64 — для ОС FreeBSD.
Выберите Режим загрузки сервера. Если сервер поддерживает только один из режимов загрузки по сети, выберите требуемый: PXE или iPXE. Если поддерживаются оба варианта загрузки, рекомендуем использовать режим, заданный шаблоном по умолчанию.

Введите Пароль администратора сервера.
Нажмите Запустить.
Если на сервере не настроено подключение к PDU, BMC или Intel AMT, перезагрузите сервер вручную.
После запуска операции DCImanager 6 перейдёт к загрузке на сервер выбранного шаблона восстановления. Процесс загрузки шаблона отображается на странице Серверы в колонке Статус. По окончании загрузки вы можете подключиться к серверу по SSH с правами суперпользователя, используя заданный пароль.

Остановка режима восстановленияLink to Остановка режима восстановления
Для выхода из режима восстановления перейдите в Серверы → выберите сервер →   → Отменить текущую операцию → Отменить восстановление. Сервер перезагрузится автоматически. Если на сервере не настроено подключение к PDU, BMC или Intel AMT, перезагрузите сервер вручную.

Пример восстановления пароля суперпользователяLink to Пример восстановления пароля суперпользователя
Подключитесь к восстанавливаемому серверу по SSH.
Определите способ подключения дисков. Например, с помощью команды:

lsblk
Определите раздел диска, на котором находится корневой раздел.
Создайте директорию:

mkdir /true_root
Примонтируйте к директории корневой раздел:

mount /dev/device /true_root
Пояснения:

device — устройство, содержащее корневой раздел.

Измените корневой каталог:

chroot /true_root
Для смены пароля суперпользователя выполните команду:

passwd root
Дважды введите новый пароль и выйдите из chroot с помощью команды:

exit
Отмонтируйте директорию:

umount /true_root
