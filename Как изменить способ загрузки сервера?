Проведение некоторых операций требует загрузки сервера с использованием PXE. Например, такая загрузка нужна для установки операционной системы, проведения диагностики, перехода в режим восстановления. Эти операции не смогут выполниться, если на сервере по умолчанию настроена загрузка с других устройств. Изменить способ загрузки сервера вы можете в настройках BIOS или с помощью API DCImanager 6.

Чтобы включить автоматическую загрузку серверов через PXE, выполните команду:

curl -X POST 'https://domain.com/api/dci/v3/setting/operation_change_boot_order' -H 'x-xsrf-token: <session_id>' -H 'Cookie: ses6=<session_id>' -H 'isp-box-instance: true' -d '{"value": "true"}'
 Пояснения к команде
domain.com — IP-адрес или доменное имя сервера с DCImanager 6

<session_id> — id сессии. Подробнее см. в статье Работа с API

Если на сервере настроено подключение к BMC, DCImanager 6 перед каждой операцией будет изменять способ загрузки с помощью утилиты ipmitool. Для этого платформа запустит на сервере выполнение команды:

ipmitool chassis bootdev pxe options=efiboot
Чтобы отключить автоматическую загрузку серверов через PXE, выполните команду:

curl -X POST 'https://domain.com/api/dci/v3/setting/operation_change_boot_order' -H 'x-xsrf-token: <session_id>' -H 'Cookie: ses6=<session_id>' -H 'isp-box-instance: true' -d '{"value": "false"}'
 Пояснения к команде
domain.com — IP-адрес или доменное имя сервера с DCImanager 6

<session_id> — id сессии. Подробнее см. в статье Работа с API


Обратите внимание!

Чтобы команды были выполнены успешно, для сервера должно быть настроено подключение BMC. Подробнее см. Настройка подключений сервера.
