Вы можете добавить макросы в шаблоны DCImanager 6. Макросы позволяют указать дополнительные настройки для установки шаблона. При выполнении операции приоритет настроек, заданных через макросы, будет выше, чем у настроек, заданных в платформе DCImanager 6.


Обратите внимание!

Не рекомендуем менять настройки шаблона, если вы полностью не уверены в своих действиях. Некорректные значения макросов могут нарушить работу шаблона.

Макросы сетевых настроекLink to Макросы сетевых настроек
$GATEWAY — шлюз по умолчанию.

$GATEWAYv4 — шлюз по умолчанию для IPv4.

$GATEWAYv6 — шлюз по умолчанию для IPv6.

$IP — основной IP-адрес.

$IPv4 — IPv4-адрес.

$IPv4ALIASES — дополнительные IPv4-адреса. Указываются через пробел.

$IPv6 — IPv6-адрес.

$IPv6ALIASES — дополнительные IPv6-адреса. Указываются через пробел.

$NAMESERVER — основной DNS-сервер.

$NAMESERVERS — DNS-серверы.

$NAMESERVERv4 — DNS-сервер для IPv4.

$NAMESERVERv6 — DNS-сервер для IPv6.

$NETMASK — маска сети основного IP-адреса.

$NETMASK_SHORT — маска сети в виде префикса.

$NETMASKv4 — маска сети для IPv4.

$NETMASKv6 — маска сети для IPv6.

$TMPIPv4 — использование временного IPv4-адреса на время установки ОС. Возможные значения:

"true" — использовать;
"false" — не использовать.
$WIN_MAC — MAC-адрес, который используется для определения основного интерфейса сервера при установке ОС Windows.

Макросы настроек сервераLink to Макросы настроек сервера
$HOSTNAME — имя хоста.

$PASS — пароль root-пользователя.

$PASS_CRYPT — хэш md5-пароля root-пользователя.

$SSHPUBKEYS — список публичных SSH-ключей. Используется при установке Unix-систем. Ключи добавляются в файл /root/.ssh/authorized_keys.

Макросы диагностики и восстановления серверовLink to Макросы диагностики и восстановления серверов
$CGI_IPMI_CHECK — CGI, который проверяет доступность BMC после его настройки. Используется в шаблонах диагностики.

$CLEAR_HDD — очистка жёстких дисков. Используется в шаблонах диагностики. Возможные значения:

"YES" — выполнять;
любое другое значение — не выполнять.
$FULL_HDD_CLEAR — полная очистка жёстких дисков. Используется в шаблонах диагностики. Возможные значения:

"YES" — выполнять;
любое другое значение — не выполнять.
$INITRD — файловая система. Используется для PXE-загрузки.

$KERNEL — ядро операционной системы. Используется для PXE-загрузки.

$NFS — путь к NFS-хранилищу, в котором содержатся файлы для операции. Указывается для шаблонов диагностики и восстановления серверов.

$NFSPATH — полный внешний путь к NFS-хранилищу, в котором содержатся файлы для операции. Указывается для шаблонов диагностики и восстановления серверов.

Макросы настройки ОС WindowsLink to Макросы настройки ОС Windows
$LANG — язык локализации ОС

$PRODUCTKEY — лицензионный ключ.

$SMB_PATHv4 — путь к Samba-хранилищу по протоколу IPv4.

$WINNTSETUP — использовать утилиту WinNtSetup. Возможные значения:

"yes" — использовать.
$TIMEZONE — временная зона. 

 Настройка макроса $TIMEZONE
Макросы для установки ОСLink to Макросы для установки ОС
$DISK_LAYOUT_FILE — ссылка на файл разметки диска. Используется при пользовательской разметке диска.

$HDD_RAID — тип программного RAID для настройки. Используется в шаблонах, поддерживающих RAID-массивы. Возможные значения:

no_raid — не настраивать RAID;
raid_0;
raid_1;
raid_5;
raid_10.
$HTTPPROXY — HTTP-proxy. Используется для кэширования пакетов при установке ОС.

$HTTPPROXYv4 — HTTP-proxy для IPv4. Используется для кэширования пакетов при установке ОС.

$HTTPPROXYv6 — HTTP-proxy для IPv6. Используется для кэширования пакетов при установке ОС.

$MIRROR — зеркало репозитория ОС.

$OSINSTALLINFO_HTTP — URL-адрес для получения информации, необходимой для установки ОС, по протоколу HTTP.

$OSINSTALLINFO_HTTPS — URL-адрес для получения информации, необходимой для установки ОС, по протоколу HTTPS.

$OSINSTALLINFO_HTTPSv4 — URL-адрес для получения информации, необходимой для установки ОС, с использованием протоколов HTTPS и IPv4.

$OSINSTALLINFO_HTTPv4 — URL-адрес для получения информации, необходимой для установки ОС, с использованием протоколов HTTP и IPv4.

$OSINSTALLINFO_SHORT_HTTP — сокращённый URL-адрес для получения информации, необходимой для установки ОС, по протоколу HTTP.

$SHAREDIR_FILE — URL-адрес директории, доступной по HTTP.

$SHAREDIR_FILEv4 — URL-адрес директории, доступной по HTTP при использовании протокола IPv4.

$SHAREDIR_FILEv6 — URL-адрес директории, доступной по HTTP при использовании протокола IPv6.

Макросы для пост-установки ОСLink to Макросы для пост-установки ОС
$AFTER_INSTALL_SCRIPT_HTTP — URL-адрес скрипта по протоколу HTTP для запуска после установки ОС.

$AFTER_INSTALL_SCRIPT_HTTPS — URL-адрес скрипта по протоколу HTTPS для запуска после установки ОС.

$FINISH — URL-адрес, который вызывается по завершении установки ОС.

$FINISHv4 — URL-адрес, который вызывается по завершении установки ОС с использованием протокола IPv4.

$FINISHv6 — URL-адрес, который вызывается по завершении установки ОС с использованием протокола IPv6.
